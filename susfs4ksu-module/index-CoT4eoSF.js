import{H as Z,F as Q,g as x}from"./fade-4ApaDT9x.js";import{b as ee,a as O,c as se,o as te,y as oe,g as ae,l as ne,p as de,d as ie,r as ce,w as ue,e as _e,s as le,f as re}from"./creditsjs-BfjoyHvA.js";import"./i18n-BqJdyLAD.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const _ of n.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&o(_)}).observe(document,{childList:!0,subtree:!0});function u(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=u(a);fetch(a.href,n)}})();let fe=0;function me(s){return`${s}_callback_${Date.now()}_${fe++}`}function I(s,t){return typeof t>"u"&&(t={}),new Promise((u,o)=>{const a=me("exec");window[a]=(_,f,h)=>{u({errno:_,stdout:f,stderr:h}),n(a)};function n(_){delete window[_]}try{ksu.exec(s,JSON.stringify(t),a)}catch(_){o(_),n(a)}})}function d(s){ksu.toast(s)}const he="/assets/cyan1-BWTE1JdY.png",ge="/assets/orange1-CeH2ZIyG.png",ve="/assets/yellow1-Bmr_vY2u.png",v=document.getElementById("backgroundCanvas"),b=v.getContext("2d");function C(){v.width=window.innerWidth,v.height=window.innerHeight,z()}const T=[],M=[],pe=100,H=[ee,O,O,se,he,te,ge,oe,ve,ae,ne,de,ie,ce,ue,_e];H.length;function ke(){T.length=0;for(let s=0;s<pe;s++)T.push({x:Math.random()*v.width,y:Math.random()*v.height,radius:Math.random()*2,speed:Math.random()*.5})}function ye(s,t){return[...s].sort(()=>.5-Math.random()).slice(0,t)}function z(){M.length=0,ye(H,6).forEach(t=>{const u=new Image;u.src=t,u.onload=()=>{M.push({img:u,x:Math.random()*v.width,y:Math.random()*v.height,width:50,height:60,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.02,speedX:(Math.random()-.5)*1.5,speedY:(Math.random()-.5)*1.5})}})}function G(){b.clearRect(0,0,v.width,v.height),b.fillStyle="white",T.forEach(s=>{b.beginPath(),b.arc(s.x,s.y,s.radius,0,Math.PI*2),b.fill(),s.y+=s.speed,s.y>v.height&&(s.y=0,s.x=Math.random()*v.width)}),M.forEach(s=>{b.save(),b.translate(s.x+s.width/2,s.y+s.height/2),b.rotate(s.rotation),b.drawImage(s.img,-s.width/2,-s.height/2,s.width,s.height),b.restore(),s.x+=s.speedX,s.y+=s.speedY,s.rotation+=s.rotationSpeed,s.x>v.width&&(s.x=-s.width),s.x+s.width<0&&(s.x=v.width),s.y>v.height&&(s.y=-s.height),s.y+s.height<0&&(s.y=v.height)}),requestAnimationFrame(G)}window.addEventListener("resize",C);C();ke();z();G();const $="/data/adb/ksu/susfs4ksu",B="/data/adb/modules/susfs4ksu",i="/data/adb/susfs4ksu",g="/data/adb/ksu/bin/ksu_susfs",K="/data/adb/ksu/bin/susfsd",L=U(await e(`cat ${i}/config.sh`));var P=await e(`grep version= ${B}/module.prop | cut -d '=' -f 2`),p=await e(`echo "${P}" | cut -d '-' -f 1 | sed 's/^v//; s/\\.//g'`);const be=document.getElementById("susfs_version");be.innerHTML=P;const F=await e(`${g} show enabled_features || ${K} features`),A=await e(`${K} variant || ${g} show variant`);p>152&&document.getElementById("susfs_kernel_status").classList.remove("hidden");await e(`[ -f ${$}/logs/susfs_active ] && echo true || echo false`)=="false"&&document.getElementById("susfs_nos_dialog").showModal();var Ee=await e(`[ -s ${$}/logs/susfs.log ] && echo false || echo true`),S=U(await e(`cat ${$}/susfs_stats.txt`));Ee=="true"&&(S=U(await e(`cat ${$}/susfs_stats1.txt`)),d("/data/adb/ksu/susfs4ksu/logs/susfs.log is empty/missing."),d("Fallback to stats executed from the module."));function U(s){return s.split(`
`).filter(u=>u.includes("=")).reduce((u,o)=>{const[a,n]=o.split("=").map(_=>_.trim());return n.startsWith("'")&&n.endsWith("'")||n.startsWith('"')&&n.endsWith('"')?u[a]=n.substring(1,n.length-1):u[a]=isNaN(Number(n))?n:Number(n),u},{})}document.getElementById("sus_path").innerHTML=S.sus_path;document.getElementById("sus_map").innerHTML=S.sus_map;document.getElementById("sus_mount").innerHTML=S.sus_mount;document.getElementById("try_umount").innerHTML=S.try_umount;document.getElementById("kernel_version").innerHTML=await e("uname -a | cut -d' ' -f3-");var R=L.sus_su;document.getElementById("sus_su_152");const we=document.getElementById("sus_su_154"),Le=document.getElementById("sus_su_142"),Se=document.getElementById("sus_su_1");R==-1?(sus_su.removeAttribute("checked"),sus_su.setAttribute("disabled",""),enable_sus_su.removeAttribute("checked"),enable_sus_su.setAttribute("disabled","")):(p>=150&&R==1&&Se.classList.remove("hidden"),Le.classList.remove("hidden"),V(L));p>=154&&(we.classList.remove("hidden"),Y(L,p));const D=new Z.Core({transitions:{default:Q}});D.on("NAVIGATE_IN",async({to:s,from:t,trigger:u,location:o})=>{var a=window.location.pathname;window.i18n&&(window.i18n.getCurrentLanguage(),window.i18n.applyTranslationsToNewContent(s.view)),a==="/credits.html"&&(le(),re())});D.on("NAVIGATE_END",async({to:s,from:t,trigger:u,location:o})=>{const a=U(await e(`cat ${i}/config.sh`));var n=window.location.pathname;n==="/index.html"?(console.log("in index"),j(),X(),J(),q(a),W(a),p>=154&&Y(a,p),V(a)):n==="/custom.html"?($e(a),Be(a),Me(),Ne(),Ue(),xe(p),Te(F)):n==="/status.html"&&Oe(F)});async function e(s){return new Promise((t,u)=>{const o=`exec_callback_${Date.now()}`;window[o]=(a,n,_)=>{delete window[o],a===0?t(n):(console.error(`Error executing command: ${_}`),u(_))};try{ksu.exec(s,"{}",o)}catch(a){console.error(`Execution error: ${a}`),u(a)}})}async function Ie(s,t){const u=document.getElementById("susfs_update_dialog"),o=document.getElementById("susfs_update_btn"),a=document.getElementById("susfs_update"),n=document.getElementById("susfs_updating"),_=document.getElementById("susfs_update_desc1"),f=document.getElementById("susfs_update_desc2"),h=document.getElementById("susfs_loading_icon"),c=document.getElementById("susfs_update_buttons");u.showModal(),o.addEventListener("click",async function(){a.classList.add("hidden"),_.classList.add("hidden"),f.classList.add("hidden"),c.classList.add("hidden"),h.classList.remove("hidden"),n.classList.remove("hidden"),setTimeout(async()=>{try{await e(`sh ${B}/susfs-bin-update.sh ${s.toString()} ${t.toLowerCase()}`),u.close(),d(`SUSFS binary updated to version ${s} for ${t} kernel!`)}catch{d("Error updating SUSFS binary!")}},500)})}async function V(s){const t=document.getElementById("sus_su"),u=document.getElementById("enable_sus_su");var o=s;o.sus_su==1||o.sus_su==2?t.addEventListener("click",function(){o.sus_su_active==1||o.sus_su_active==2?(console.log("false"),o.sus_su_active=0,e(`${g} sus_su 0`),I(`sed -i 's/sus_su_active=.*/sus_su_active=0/' ${i}/config.sh`),d("sus su off no need to reboot"),t.removeAttribute("checked")):(console.log("true"),p>=150?(o.sus_su_active=2,e(`${g} sus_su 2`),I(`sed -i 's/sus_su_active=.*/sus_su_active=2/' ${i}/config.sh`)):(o.sus_su_active=1,e(`${g} sus_su 1`),I(`sed -i 's/sus_su_active=.*/sus_su_active=1/' ${i}/config.sh`)),d("sus su on no need to reboot"),t.setAttribute("checked","checked"))}):(t.checked=!1,u.checked=!1,t.setAttribute("disabled","")),o.sus_su_active==0&&(t.checked=!1),u.addEventListener("click",async function(){o.sus_su==1||o.sus_su==2?(console.log("false"),o.sus_su=0,d("Reboot to take effect"),e(`sed -i 's/sus_su=.*/sus_su=0/' ${i}/config.sh`),I(`sed -i 's/sus_su_active=.*/sus_su_active=0/' ${i}/config.sh`),u.checked=!1,t.setAttribute("disabled","")):(console.log("true"),d("Reboot to take effect"),p>=150?(o.sus_su=2,e(`sed -i 's/sus_su=.*/sus_su=2/' ${i}/config.sh`)):(o.sus_su=1,e(`sed -i 's/sus_su=.*/sus_su=1/' ${i}/config.sh`)),u.checked="checked",t.removeAttribute("disabled",""))})}async function Y(s,t){const u=document.getElementById("auto_mount"),o=document.getElementById("auto_bind"),a=document.getElementById("auto_umount_bind"),n=document.getElementById("try_umount_zygote"),_=document.getElementById("hide_sus_mnts_for_all_procs"),f=document.getElementById("umount_for_zygote_iso_service");var h=await e("[ -f data/adb/susfs_no_auto_add_sus_ksu_default_mount ] && echo true || echo false"),c=await e("[ -f data/adb/susfs_no_auto_add_sus_bind_mount ] && echo true || echo false"),r=await e("[ -f data/adb/susfs_no_auto_add_try_umount_for_bind_mount ] && echo true || echo false"),k=await e("[ -f data/adb/susfs_umount_for_zygote_system_process ] && echo true || echo false"),l=s;h=="true"&&(u.checked=!1),c=="true"&&(o.checked=!1),r=="true"&&(a.checked=!1),k=="false"&&(n.checked=!1),t>=157?(_.removeAttribute("disabled"),l.hide_sus_mnts_for_all_procs==!0?_.checked="checked":_.checked=!1):_.checked=!1,t>=158?(f.removeAttribute("disabled"),l.umount_for_zygote_iso_service==!0?f.checked="checked":f.checked=!1):_.checked=!1,u.addEventListener("click",async function(){h=await e("[ -f data/adb/susfs_no_auto_add_sus_ksu_default_mount ] && echo true || echo false"),h=="true"?(await e("rm -f data/adb/susfs_no_auto_add_sus_ksu_default_mount"),d("Reboot to take effect")):(await e("touch data/adb/susfs_no_auto_add_sus_ksu_default_mount"),d("Reboot to take effect"))}),o.addEventListener("click",async function(){c=await e("[ -f data/adb/susfs_no_auto_add_sus_bind_mount ] && echo true || echo false"),c=="true"?(await e("rm -f data/adb/susfs_no_auto_add_sus_bind_mount"),d("Reboot to take effect")):(await e("touch data/adb/susfs_no_auto_add_sus_bind_mount"),d("Reboot to take effect"))}),a.addEventListener("click",async function(){r=await e("[ -f data/adb/susfs_no_auto_add_try_umount_for_bind_mount ] && echo true || echo false"),r=="true"?(await e("rm -f data/adb/susfs_no_auto_add_try_umount_for_bind_mount"),d("Reboot to take effect")):(await e("touch data/adb/susfs_no_auto_add_try_umount_for_bind_mount"),d("Reboot to take effect"))}),n.addEventListener("click",async function(){k=await e("[ -f data/adb/susfs_umount_for_zygote_system_process ] && echo true || echo false"),k=="true"?(await e("rm -f data/adb/susfs_umount_for_zygote_system_process"),d("Reboot to take effect")):(await e("touch data/adb/susfs_umount_for_zygote_system_process"),d("Reboot to take effect"))}),f.addEventListener("click",async function(){l.umount_for_zygote_iso_service==!0?(await e(`sed -i 's/umount_for_zygote_iso_service=.*/umount_for_zygote_iso_service=0/' ${i}/config.sh`),await e(`${g} umount_for_zygote_iso_service 0`),l.umount_for_zygote_iso_service=!1,d("Try umount for zygote isolation service disabled! No need to reboot")):(await e(`sed -i 's/umount_for_zygote_iso_service=.*/umount_for_zygote_iso_service=1/' ${i}/config.sh`),await e(`${g} umount_for_zygote_iso_service 1`),l.umount_for_zygote_iso_service=!0,d("Try umount for zygote isolation service enabled! No need to reboot"))}),_.addEventListener("click",async function(){l.hide_sus_mnts_for_all_procs==!0?(await e(`sed -i 's/hide_sus_mnts_for_all_procs=.*/hide_sus_mnts_for_all_procs=0/' ${i}/config.sh`),await e(`${g} hide_sus_mnts_for_all_procs 0`),l.hide_sus_mnts_for_all_procs=0,d("Hide SUS mounts for all processes disabled! No need to reboot"),_.checked=!1):(await e(`sed -i 's/hide_sus_mnts_for_all_procs=.*/hide_sus_mnts_for_all_procs=1/' ${i}/config.sh`),await e(`${g} hide_sus_mnts_for_all_procs 1`),l.hide_sus_mnts_for_all_procs=1,d("Hide SUS mounts for all processes enabled! No need to reboot"),_.checked="checked")})}async function q(s){document.getElementById("kernel_version").innerHTML=await e("uname -a | cut -d' ' -f3-");const t=document.getElementById("set_uname"),u=document.getElementById("uname-spoof-on-boot"),o=document.getElementById("uname-spoof-on-postfsdata"),a=document.getElementById("uname-at-postfs"),n=document.getElementById("confirm_modal"),_=document.getElementById("modal_confirm"),f=document.getElementById("modal_cancel");document.getElementById("modal_message");const h=document.querySelector("main");var c=document.getElementById("sus_uname"),r=document.getElementById("sus_uname_build"),k=document.getElementById("sus_uname_checkbox"),l=document.getElementById("sus_uname_build_checkbox"),y=document.getElementById("spoofed_kernel_version"),w=document.getElementById("spoofed_kernel_build");const m=s;y.innerHTML=m.kernel_version,w.innerHTML=m.kernel_build,m.spoof_uname>0?(u.checked="checked",a.classList.remove("hidden")):(u.checked=!1,a.classList.add("hidden")),m.spoof_uname>1?o.checked="checked":o.checked=!1,t.addEventListener("click",async function(){c=document.getElementById("sus_uname"),r=document.getElementById("sus_uname_build"),k=document.getElementById("sus_uname_checkbox"),l=document.getElementById("sus_uname_build_checkbox"),c.value.includes(" ")&&k.checked==!0?d("Spaces are not allowed in the input!"):k.checked==!0&&l.checked==!1?(c.value==""?(e(`${g} set_uname 'default' '${m.kernel_build}'`),await e(`sed -i 's/kernel_version=.*/kernel_version="default"/' ${i}/config.sh`),document.getElementById("kernel_version").innerHTML=await e("uname -a | cut -d' ' -f3-"),m.kernel_version="default",y.innerHTML="default",t.blur()):(e(`${g} set_uname '${c.value}' '${m.kernel_build}'`),await e(`sed -i 's/kernel_version=.*/kernel_version="${c.value}"/' ${i}/config.sh`),m.kernel_version=c.value,y.innerHTML=c.value,t.blur()),c.value=""):k.checked==!1&&l.checked==!0?(r.value==""?(e(`${g} set_uname '${m.kernel_version}' 'default'`),await e(`sed -i 's/kernel_build=.*/kernel_build="default"/' ${i}/config.sh`),m.kernel_build="default",w.innerHTML="default",t.blur()):(e(`${g} set_uname '${m.kernel_version}' '${r.value}'`),await e(`sed -i 's/kernel_build=.*/kernel_build="${r.value}"/' ${i}/config.sh`),m.kernel_build=r.value,w.innerHTML=r.value,t.blur()),r.value=""):k.checked==!0&&l.checked==!0&&(c.value==""&&r.value==""?(console.log("default kernel version"),e(`${g} set_uname 'default' 'default'`),m.kernel_version="default",m.kernel_build="default",await e(`sed -i 's/kernel_version=.*/kernel_version="default"/' ${i}/config.sh`),await e(`sed -i 's/kernel_build=.*/kernel_build="default"/' ${i}/config.sh`),document.getElementById("kernel_version").innerHTML=await e("uname -a | cut -d' ' -f3-"),y.innerHTML="default",w.innerHTML="default",t.blur()):(console.log(`sets to ${c.value}`),r.value==""?(m.kernel_version=c.value,m.kernel_build="default",e(`${g} set_uname '${c.value}' 'default'`),await e(`sed -i 's/kernel_version=.*/kernel_version="${c.value}"/' ${i}/config.sh`),await e(`sed -i 's/kernel_build=.*/kernel_build="default"/' ${i}/config.sh`),y.innerHTML=c.value,w.innerHTML="default"):c.value==""?(m.kernel_version="default",m.kernel_build=r.value,e(`${g} set_uname 'default' '${r.value}'`),await e(`sed -i 's/kernel_version=.*/kernel_version="default"/' ${i}/config.sh`),await e(`sed -i 's/kernel_build=.*/kernel_build="${r.value}"/' ${i}/config.sh`),y.innerHTML="default",w.innerHTML=r.value):(m.kernel_version=c.value,m.kernel_build=r.value,e(`${g} set_uname '${c.value}' '${r.value}'`),await e(`sed -i 's/kernel_version=.*/kernel_version="${c.value}"/' ${i}/config.sh`),await e(`sed -i 's/kernel_build=.*/kernel_build="${r.value}"/' ${i}/config.sh`),y.innerHTML=c.value,w.innerHTML=r.value)),c.value="",r.value=""),document.getElementById("kernel_version").innerHTML=await e("uname -a | cut -d' ' -f3-"),t.blur()}),u.addEventListener("change",async function(E){const N=document.getElementById("uname-at-postfs");E.preventDefault(),m.spoof_uname<1?(await e(`sed -i 's/spoof_uname=.*/spoof_uname=1/' ${i}/config.sh`),m.spoof_uname=1,d("Reboot to take effect"),N.classList.remove("hidden")):(await e(`sed -i 's/spoof_uname=.*/spoof_uname=0/' ${i}/config.sh`),m.spoof_uname=0,o.checked=!1,d("Reboot to take effect"),N.classList.add("hidden"))}),o.addEventListener("change",async function(E){E.preventDefault(),m.spoof_uname<2?n.showModal():await e(`sed -i 's/spoof_uname=.*/spoof_uname=1/' ${i}/config.sh`)}),_.addEventListener("click",async function(){const E=document.getElementById("uname-spoof-on-postfsdata");E.checked="checked",await e(`sed -i 's/spoof_uname=.*/spoof_uname=2/' ${i}/config.sh`),m.spoof_uname=2,d("Reboot to take effect"),n.close()}),f.addEventListener("click",async function(){const E=document.getElementById("uname-spoof-on-postfsdata");E.checked=!1,n.close()}),c.addEventListener("focus",()=>{h.style.paddingBottom="350px",c.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),c.addEventListener("blur",E=>{setTimeout(()=>{document.activeElement!==r&&x.to(h,{duration:.5,paddingBottom:"0px",ease:"power1.out"})},0)}),r.addEventListener("focus",()=>{h.style.paddingBottom="350px",r.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),r.addEventListener("blur",E=>{setTimeout(()=>{document.activeElement!==c&&x.to(h,{duration:.5,paddingBottom:"0px",ease:"power1.out"})},0)})}async function W(s){var t=document.getElementById("susfs_log");s.susfs_log===1?t.setAttribute("checked","checked"):t.removeAttribute("checked"),t.addEventListener("click",async function(){t.hasAttribute("checked")?(console.log("false"),d("Reboot to take effect"),await e(`sed -i 's/susfs_log=1/susfs_log=0/' ${i}/config.sh`),t.removeAttribute("checked")):(console.log("true"),d("Reboot to take effect"),await e(`sed -i 's/susfs_log=0/susfs_log=1/' ${i}/config.sh`),t.setAttribute("checked","checked"))})}async function $e(s){const t=document.getElementById("hide_gapps"),u=document.getElementById("hide_revanced"),o=document.getElementById("spoof_cmdline"),a=document.getElementById("hide_ksu_loop"),n=document.getElementById("force_hide_lsposed"),_=document.getElementById("avc_log_spoofing"),f=document.getElementById("emulate_vold_app_data");var h=!0;const c=s;try{await e(`${g} enable_avc_log_spoofing ${c.avc_log_spoofing}`)}catch(r){console.error("Error enabling AVC log spoofing:",r),h=!1}c.hide_gapps==!0?t.checked="checked":t.checked=!1,c.hide_revanced==!0?u.checked="checked":u.checked=!1,c.spoof_cmdline==!0?o.checked="checked":o.checked=!1,c.hide_loops==!0?a.checked="checked":a.checked=!1,c.force_hide_lsposed==!0?n.checked="checked":n.checked=!1,p<157?(f.checked=!1,f.disabled=!0):c.emulate_vold_app_data==!0?f.checked="checked":f.checked=!1,p<159||!h?_.disabled=!0:c.avc_log_spoofing==!0?_.checked="checked":_.checked=!1,t.addEventListener("click",async function(){c.hide_gapps==!0?(await e(`sed -i 's/hide_gapps=1/hide_gapps=0/' ${i}/config.sh`),c.hide_gapps=!1,d("Reboot to take effect")):(await e(`sed -i 's/hide_gapps=0/hide_gapps=1/' ${i}/config.sh`),c.hide_gapps==!0,d("Reboot to take effect"))}),u.addEventListener("click",async function(){c.hide_revanced==!0?(await e(`sed -i 's/hide_revanced=1/hide_revanced=0/' ${i}/config.sh`),c.hide_revanced=!1,d("Reboot to take effect")):(await e(`sed -i 's/hide_revanced=0/hide_revanced=1/' ${i}/config.sh`),c.hide_revanced=!0,d("Reboot to take effect"))}),o.addEventListener("click",async function(){c.spoof_cmdline==!0?(await e(`sed -i 's/spoof_cmdline=1/spoof_cmdline=0/' ${i}/config.sh`),c.spoof_cmdline=!1,d("Reboot to take effect")):(await e(`sed -i 's/spoof_cmdline=0/spoof_cmdline=1/' ${i}/config.sh`),c.spoof_cmdline=!0,d("Reboot to take effect"))}),a.addEventListener("click",async function(){c.hide_loops==!0?(await e(`sed -i 's/hide_loops=1/hide_loops=0/' ${i}/config.sh`),c.hide_loops=!1,d("Reboot to take effect")):(await e(`sed -i 's/hide_loops=0/hide_loops=1/' ${i}/config.sh`),c.hide_loops=!0,d("Reboot to take effect"))}),n.addEventListener("click",async function(){c.force_hide_lsposed==!0?(await e(`sed -i 's/force_hide_lsposed=1/force_hide_lsposed=0/' ${i}/config.sh`),c.force_hide_lsposed=!1,d("Reboot to take effect")):(await e(`sed -i 's/force_hide_lsposed=0/force_hide_lsposed=1/' ${i}/config.sh`),c.force_hide_lsposed=!0,d("Reboot to take effect"))}),_.addEventListener("click",async function(){c.avc_log_spoofing==!0?(await e(`sed -i 's/avc_log_spoofing=.*/avc_log_spoofing=0/' ${i}/config.sh`),await e(`${g} enable_avc_log_spoofing 0`),c.avc_log_spoofing=!1,d("AVC Log Spoofing off! no need to reboot")):(await e(`sed -i 's/avc_log_spoofing=.*/avc_log_spoofing=1/' ${i}/config.sh`),await e(`${g} enable_avc_log_spoofing 1`),c.avc_log_spoofing=!0,d("AVC Log Spoofing on! no need to reboot"))}),f.addEventListener("click",async function(){c.emulate_vold_app_data==!0?(await e(`sed -i 's/emulate_vold_app_data=.*/emulate_vold_app_data=0/' ${i}/config.sh`),await e(`${g} enable_vold_app_data 0`),c.emulate_vold_app_data=!1,d("Reboot to take effect")):(await e(`sed -i 's/emulate_vold_app_data=.*/emulate_vold_app_data=1/' ${i}/config.sh`),await e(`${g} enable_vold_app_data 1`),c.emulate_vold_app_data=!0,d("Reboot to take effect"))})}async function Be(s){const t=document.getElementById("hide_custom_rom"),u=document.getElementById("custom_rom_levels"),o=document.getElementById("hide_level"),a=document.getElementById("hide_level1"),n=document.getElementById("hide_level2"),_=document.getElementById("hide_level3"),f=document.getElementById("hide_level4"),h=document.getElementById("hide_level5"),c=document.getElementById("hide_vendor_sepolicy"),r=document.getElementById("hide_compat_matrix"),k=document.getElementById("fake_service_list"),l=s;l.hide_cusrom>0?(t.checked="checked",u.classList.remove("hidden"),l.hide_cusrom==1?(o.value="0",a.classList.remove("hidden")):l.hide_cusrom==2?(o.value="25",n.classList.remove("hidden")):l.hide_cusrom==3?(o.value="50",_.classList.remove("hidden")):l.hide_cusrom==4?(o.value="75",f.classList.remove("hidden")):l.hide_cusrom==5&&(o.value="100",h.classList.remove("hidden"))):(t.checked=!1,u.classList.add("hidden")),l.hide_vendor_sepolicy==!0?c.checked="checked":c.checked=!1,l.hide_compat_matrix==!0?r.checked="checked":r.checked=!1,l.fake_service_list==!0?k.checked="checked":k.checked=!1,t.addEventListener("click",async function(){const y=document.getElementById("custom_rom_levels");l.hide_cusrom>0?(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=0/' ${i}/config.sh`),l.hide_cusrom=0,y.classList.add("hidden"),a.classList.add("hidden"),n.classList.add("hidden"),_.classList.add("hidden"),f.classList.add("hidden"),h.classList.add("hidden"),d("Reboot to take effect")):(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=1/' ${i}/config.sh`),o.value="0",l.hide_cusrom=1,y.classList.remove("hidden"),a.classList.remove("hidden"),d("Reboot to take effect"))}),o.addEventListener("change",async function(){o.value=="0"?(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=1/' ${i}/config.sh`),a.classList.remove("hidden"),n.classList.add("hidden"),_.classList.add("hidden"),f.classList.add("hidden"),h.classList.add("hidden")):o.value=="25"?(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=2/' ${i}/config.sh`),a.classList.add("hidden"),n.classList.remove("hidden"),_.classList.add("hidden"),f.classList.add("hidden"),h.classList.add("hidden")):o.value=="50"?(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=3/' ${i}/config.sh`),a.classList.add("hidden"),n.classList.add("hidden"),_.classList.remove("hidden"),f.classList.add("hidden"),h.classList.add("hidden")):o.value=="75"?(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=4/' ${i}/config.sh`),a.classList.add("hidden"),n.classList.add("hidden"),_.classList.add("hidden"),f.classList.remove("hidden"),h.classList.add("hidden")):o.value=="100"&&(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=5/' ${i}/config.sh`),a.classList.add("hidden"),n.classList.add("hidden"),_.classList.add("hidden"),f.classList.add("hidden"),h.classList.remove("hidden"))}),c.addEventListener("click",async function(){l.hide_vendor_sepolicy==!0?(e(`sed -i 's/hide_vendor_sepolicy=1/hide_vendor_sepolicy=0/' ${i}/config.sh`),l.hide_vendor_sepolicy=!1,d("Reboot to take effect")):(e(`sed -i 's/hide_vendor_sepolicy=0/hide_vendor_sepolicy=1/' ${i}/config.sh`),l.hide_vendor_sepolicy=!0,d("Reboot to take effect"))}),r.addEventListener("click",async function(){l.hide_compat_matrix==!0?(e(`sed -i 's/hide_compat_matrix=1/hide_compat_matrix=0/' ${i}/config.sh`),l.hide_compat_matrix=!1,d("Reboot to take effect")):(e(`sed -i 's/hide_compat_matrix=0/hide_compat_matrix=1/' ${i}/config.sh`),l.hide_compat_matrix=!0,d("Reboot to take effect"))}),k.addEventListener("click",async function(){l.fake_service_list==!0?(e(`sed -i 's/fake_service_list=1/fake_service_list=0/' ${i}/config.sh`),l.fake_service_list=!1,d("Reboot to take effect")):(e(`sed -i 's/fake_service_list=0/fake_service_list=1/' ${i}/config.sh`),l.fake_service_list=!0,d("Reboot to take effect"))})}async function Ue(){const s=document.getElementById("load_sus_path"),t=document.getElementById("custom_sus_path"),u=document.getElementById("save_sus_path");s.addEventListener("click",async()=>{t.innerHTML=await e(`cat ${i}/sus_path.txt`)}),u.addEventListener("click",async()=>{var o=t.value;o==""?d("please press load first!"):(await e(`echo '${o}' > ${i}/sus_path.txt`),d("Custom SUS_PATH saved!"),d("Reboot to take effect"))})}async function xe(s){const t=document.getElementById("load_sus_path_loop"),u=document.getElementById("custom_sus_path_loop"),o=document.getElementById("save_sus_path_loop"),a=document.getElementById("sus_path_loop_section");if(s>158)a.classList.remove("hidden");else return;t.addEventListener("click",async()=>{u.innerHTML=await e(`cat ${i}/sus_path_loop.txt`)}),o.addEventListener("click",async()=>{var n=u.value;n==""?d("please press load first!"):(await e(`echo '${n}' > ${i}/sus_path_loop.txt`),d("Custom SUS_PATH_LOOP saved!"),d("Reboot to take effect"))})}async function Te(s){const t=document.getElementById("sus_maps_section"),u=document.getElementById("load_sus_maps"),o=document.getElementById("custom_sus_maps"),a=document.getElementById("save_sus_maps");if(s.includes("CONFIG_KSU_SUSFS_SUS_MAP"))t.classList.remove("hidden");else return;u.addEventListener("click",async()=>{o.innerHTML=await e(`cat ${i}/sus_maps.txt`)}),a.addEventListener("click",async()=>{var n=o.value;n==""?d("please press load first!"):(await e(`echo '${n}' > ${i}/sus_maps.txt`),d("Custom SUS_MAPS saved!"),d("Reboot to take effect"))})}async function Me(){const s=document.getElementById("load_sus_mount"),t=document.getElementById("custom_sus_mount"),u=document.getElementById("save_sus_mount");s.addEventListener("click",async()=>{t.innerHTML=await e(`cat ${i}/sus_mount.txt`)}),u.addEventListener("click",async()=>{var o=t.value;o==""?d("please press load first!"):(await e(`echo '${o}' > ${i}/sus_mount.txt`),d("Custom SUS_MOUNT saved!"),d("Reboot to take effect"))})}async function Ne(){const s=document.getElementById("load_try_umount"),t=document.getElementById("custom_try_umount"),u=document.getElementById("save_try_umount"),o=document.querySelector("main");s.addEventListener("click",async()=>{t.innerHTML=await e(`cat ${i}/try_umount.txt`)}),u.addEventListener("click",async()=>{var a=t.value;a==""?d("please press load first!"):(await e(`echo '${a}' > ${i}/try_umount.txt`),d("Custom TRY_UMOUNT saved!"),d("Reboot to take effect"))}),t.addEventListener("focus",()=>{o.style.paddingBottom="300px",t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),t.addEventListener("blur",()=>{x.to(o,{duration:.5,paddingBottom:"0px",ease:"power1.out"})})}async function Oe(s){const t=[{id:"status_sus_path",config:"CONFIG_KSU_SUSFS_SUS_PATH"},{id:"status_sus_map",config:"CONFIG_KSU_SUSFS_SUS_MAP"},{id:"status_sus_mount",config:"CONFIG_KSU_SUSFS_SUS_MOUNT"},{id:"status_auto_default_mount",config:"CONFIG_KSU_SUSFS_AUTO_ADD_SUS_KSU_DEFAULT_MOUNT"},{id:"status_auto_bind_mount",config:"CONFIG_KSU_SUSFS_AUTO_ADD_SUS_BIND_MOUNT"},{id:"status_sus_kstat",config:"CONFIG_KSU_SUSFS_SUS_KSTAT"},{id:"status_try_umount",config:"CONFIG_KSU_SUSFS_TRY_UMOUNT"},{id:"status_auto_try_umount_bind",config:"CONFIG_KSU_SUSFS_AUTO_ADD_TRY_UMOUNT_FOR_BIND_MOUNT"},{id:"status_spoof_uname",config:"CONFIG_KSU_SUSFS_SPOOF_UNAME"},{id:"status_enable_log",config:"CONFIG_KSU_SUSFS_ENABLE_LOG"},{id:"status_hide_symbols",config:"CONFIG_KSU_SUSFS_HIDE_KSU_SUSFS_SYMBOLS"},{id:"status_spoof_cmdline",config:"CONFIG_KSU_SUSFS_SPOOF_CMDLINE_OR_BOOTCONFIG"},{id:"status_open_redirect",config:"CONFIG_KSU_SUSFS_OPEN_REDIRECT"},{id:"status_magic_mount",config:"CONFIG_KSU_SUSFS_HAS_MAGIC_MOUNT"},{id:"status_overlayfs_auto_kstat",config:"CONFIG_KSU_SUSFS_SUS_OVERLAYFS"}],u=[{id:"status_overlayfs_auto_kstat",config:"CONFIG_KSU_SUSFS_SUS_OVERLAYFS",version:158},{id:"status_magic_mount",config:"CONFIG_KSU_SUSFS_HAS_MAGIC_MOUNT",version:1511}];for(const o of t)try{const a=s.includes(o.config),n=document.getElementById(o.id);if(n){const _=n.querySelector("span");a?(n.className="badge badge-sm badge-success text-sm ml-4",_.textContent="Enabled",_.setAttribute("data-i18n","enabled_label")):u.some(f=>f.id===o.id&&p>=f.version)?(n.className="badge badge-sm badge-secondary text-sm ml-4",_.textContent="Deprecated",_.setAttribute("data-i18n","deprecated_label")):(n.className="badge badge-sm badge-error text-sm ml-4",_.textContent="Disabled",_.setAttribute("data-i18n","disabled_label"))}}catch{const n=document.getElementById(o.id);if(n){const _=n.querySelector("span");n.className="badge badge-sm badge-warning text-sm ml-4",_.textContent="Unknown",_.setAttribute("data-i18n","unknown_label")}}}function j(){const s=document.getElementById("susfs_reset"),t=document.getElementById("confirm_reset_modal"),u=document.getElementById("reset_modal_confirm"),o=document.getElementById("reset_modal_cancel");s.addEventListener("click",async function(a){a.preventDefault(),t.showModal()}),o.addEventListener("click",async function(){t.close()}),u.addEventListener("click",async function(){d("Resetting..."),await e(`sh ${B}/susfs_reset.sh`),t.close(),d("Reset done! Please reboot"),await e("input keyevent 4")})}function J(){document.getElementById("susfs_send_logs").addEventListener("click",async function(t){try{await e("cat /proc/$(pidof zygote64)/mountinfo > /data/adb/ksu/susfs4ksu/zygote64_mountinfo.txt"),await e("cat /proc/$(pidof zygote64)/maps > /data/adb/ksu/susfs4ksu/zygote64_maps.txt"),await e("cat /proc/1/mountinfo > /data/adb/ksu/susfs4ksu/pid1_mountinfo.txt"),await e("cp /data/adb/ksu/log/dmesg.log /data/adb/ksu/susfs4ksu/dmesg.log"),await e("ksud module list > /data/adb/ksu/susfs4ksu/ksu_module_list.txt"),await e("dmesg | grep susfs > /data/adb/ksu/susfs4ksu/latest_dmesg_susfs.log"),await e("tar -C /data/adb/ksu/susfs4ksu/ -czvf /sdcard/susfs_logs.tar.gz ."),d("Logs saved to /sdcard/susfs_logs.tar.gz"),await e("am start -a android.intent.action.SEND -t '*/*' -c android.intent.category.DEFAULT --eu android.intent.extra.STREAM 'file:///sdcard/susfs_logs.tar.gz'")}catch(u){d("Failed to prepare logs: "+u.message)}})}function X(){document.getElementById("susfs_export").addEventListener("click",async function(t){try{await e("tar -C /data/adb/susfs4ksu/ -czvf /sdcard/susfs_settings.tar.gz ."),d("Settings exported to /sdcard/susfs_settings.tar.gz")}catch{d("Failed to export settings")}})}J();X();j();q(L);W(L);L.disable_webui_bin_update==!1&&await e(`sh ${B}/susfs-bin-check.sh ${p.toString()} ${A.toLowerCase()}`)=="mismatch"&&Ie(p,A);
